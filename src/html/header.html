<div class="header">
  <div class="header__container">
    <div class="header__back">
      <img src="/public/img/header/background.png" alt="">
    </div>      

    <div class="header__menu menu">
      <!-- Кнопка Сохранить с возможностью скачивания файла -->
      <div class="menu__first-child"> 
        <div class="menu__upload">
          <a href="/vcard.vcf" download="vcard.vcf">
            <img src="/public/img/header/downloaded.png" alt="">
            <p>Сохранить</p>
          </a>
        </div>
      </div>

      <div class="menu__second-child">
        <a href="src/html/pages/qrpage.html" id="menuQrLink">
          <img src="img/header/qrcode.png" alt="QR Code" id="qrImage">
        </a>
        <a href="/src/html/pages/regirster.html" class="menu__param">
          <img src="/public/img/header/settings.png" alt="">
        </a>
      </div>
    </div>

  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const link = document.getElementById('menuQrLink');
    const img = document.getElementById('qrImage');
    const currentPath = window.location.pathname;

    // Проверяем состояние из localStorage
    const savedState = localStorage.getItem('imageState');

    // Если мы на странице qrpage.html
    if (currentPath.includes('qrpage.html')) {
      img.src = '/img/header/exit.png';
      link.href = '/index.html';  // Меняем ссылку на главную страницу
      localStorage.setItem('imageState', 'exit');
    }
    // Если мы на главной странице (index.html)
    else if (currentPath.includes('index.html')) {
      img.src = '/img/header/qrcode.png';
      link.href = '/src/html/pages/qrpage.html';  // Меняем ссылку на страницу QR
      localStorage.setItem('imageState', 'qrcode');
    }

    // При клике сохраняем соответствующее состояние
    link.addEventListener('click', function() {
      if (currentPath.includes('index.html')) {
        localStorage.setItem('imageState', 'exit');
      } else if (currentPath.includes('qrpage.html')) {
        localStorage.setItem('imageState', 'qrcode');
      }
    });
  });
</script>
